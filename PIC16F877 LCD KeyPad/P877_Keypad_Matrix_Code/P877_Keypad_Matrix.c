
/*############################################################################*/
#include<lcd_hd44780.h>
#include<keypad.h>
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/
/*############################################################################*/

char key_val;

void welcome_msg(void);


/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/
void  init_main(){
     TRISB  = 0xF0;  TRISC = 0x00;  TRISE  = 0x00;  TRISA = 0x01;  TRISD = 0x00;
     PORTA     = 0;  PORTB       = 0;    PORTC       = 0;  PORTB = 0b11110000;
    }
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/


/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/
void interrupt(){
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/
// Interrupt Service Routine for Switch Press+++++++++++++++++++++++++||||||||||
  if(INTCON.RBIF){
     key_val = GetKey();
     PORTB = 0b11110000;
     INTCON.RBIF = 0;
   }
 }
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/




/*############################################################################*/
/*############################################################################*/
void main(){

     init_main();
     InitLCD();

     welcome_msg();
     ClearLCDScreen();               // Clear display  +++++++++++++++++|||||
     WriteLCDLine1("Key =");

    INTCON = 0b10001000;
    InitKeypad();
/*############################################################################*/
  while(1){
     GotoYXPositionOnLCD(0, 10);
     WriteDataToLCD(key_val);
   }

 }
/*############################################################################*/
/*############################################################################*/
