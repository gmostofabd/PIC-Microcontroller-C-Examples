
//int DIGIT0,DIGIT1,DIGIT2,DIGIT3;
char DSP_code[10]= {0x3F,0x06,0x5B,0x4F,0x66,0x6D,0x7D,0x07,0x7F,0x6F};


unsigned short digit_no[4]={ 0b11111110,0b11111101,0b11111011,0b11110111};


int bcd_val[3];
int adc_result, AdcSum;
float voltage=0.0;

//||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||

/*,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,*/
/*!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!*/
  void AnalogInit(){ADCON0 = 0b11000001; ADCON1 = 0b10000100;}
/*!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!*/
/*,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,*/
  void read_analog_0(){  AdcSum = 0;
     ADCON0 = 0b11000001;
     ADCON0.GO_DONE = 1; while(ADCON0.GO_DONE);
     AdcSum = ADRESH << 8;
     AdcSum += ADRESL;
    }
/*++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++*/









/*,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,*/
void seperate_digits(){
   bcd_val[3]=  (int)(voltage / 1000) % 10;
   bcd_val[2]= (int) (voltage / 100) % 10;
   bcd_val[1]= (int)(voltage / 10) % 10;
   bcd_val[0]= (int)(voltage / 1) % 10;
  }
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/



/*++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++*/
/*,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,*/
void disp_4_digit(){
   char i;

 for(i = 0; i<5; i ++){
//=============Convert and Display the ones digit====================///////////
   PORTD = digit_no[0];  //DIGIT0;  // RA.0 to RA3 Output
   PORTB = DSP_code[bcd_val[0]];
   Delay_ms(10);
//=============Convert and Display the tens digit====================///////////
   PORTD = digit_no[1];  //DIGIT1;  // RA.0 to RA3 Output
   PORTB = DSP_code[bcd_val[1]];
   Delay_ms(10);
//=============Convert and Display the hundred digit====================////////
   PORTD = digit_no[2];  //DIGIT2;  // RA.0 to RA3 Output
   PORTB = DSP_code[bcd_val[2]];
   Delay_ms(10);
//=============Convert and Display the thousand digit====================///////
   PORTD = digit_no[3];  //DIGIT3;  // RA.0 to RA3 Output
   PORTB = DSP_code[bcd_val[3]];
   Delay_ms(10);
   PORTB = 0;
//||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||
   }
 }
/*,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,*/
/*++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++*/




//||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||
//||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||
void main(){
//int i;   //by dfault unsigned and 0 - 65535 (2 byte Unsigned)
//ANSELH = 0;
TRISB = 0;
PORTB = 0;
TRISA = 1;
PORTA = 0;
TRISD = 0;
PORTD = 0;

//DIGIT0 = 0xFE;
//DIGIT1 = 0xFD;
//DIGIT2 = 0xFB;
//DIGIT3 = 0xF7;

//||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||
//    AnalogInit();
    ADC_Init();
//||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||
  while(1){

//    read_analog_0();
//    voltage = AdcSum;

    voltage = ADC_Read(0);   // Get 10-bit results of AD conversion

    seperate_digits();
    disp_4_digit();

   }
 } // end main
/*##############################################################################
||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||
##############################################################################*/